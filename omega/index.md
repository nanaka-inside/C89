Title: TWE-liteで簡単無線通信
Subtitle: じたばた丸計画第二回中間報告
Author: @omegamega
Author(romaji): おめが

<!--
編集上、この上の行はこのまま残しておいてね
本番のファイルは index.md で作ってね
-->

# じたばた丸計画第二回中間報告

## 前回までのあらすじ

「市販の1/700のフルハル軍艦模型を、ラジコン操作して遊びたい！できるなら将来的には自動運転もしたいし、やっぱりPC連携ね！」という欲で始まった「じたばた丸計画」。水面ギリギリに浮かぶラジコン半潜水艦「じたばた丸」を作り、その上に軍艦模型を乗せ浮力を調整すれば、水面の反射が潜水艦を隠してくれてかなりイイ感じに模型を泳がせることが可能であることまでは実証できました。ラジコン半潜水艦を作るコンセプトの正しさは証明できました。
ラジコン艦は、無線制御の中核にはTOCOS製TWE-lite無線マイコンモジュールを中核に、タミヤ製水中モーターを2軸を駆動させるのが基本構造としました。技術検証艦である1号艦では、とりあえずの食品保蔵用の100円タッパーに電池と回路一式を詰め込み、TOCOS提供のTWE-liteサンプルアプリにてコマンドを送信、ごくごく低速かつ船体制御は低いものの実際の動作に成功しました。また、近所の公園じゃぶじゃぶ池海域での試験航海も(流されながらも)無事達成することができました。次なる2号艦は船体を3Dプリントで生産し、今後の量産に耐えうる仕様、モーター出力の向上、制御性能の向上をメイン目標として作りました。しかし、水密が難しいという潜水艦特有の問題が起きてしまい、そのまま原稿締め切りが来てしまった、というところで終わっていました。

今回はその続き、2号艦の船体/回路改良と、TWE-lite制御アプリを作った話になります。

# 2号艦・第3船体

前回の記事では、2号艦(電装系)と第3プリント船体は、水密試験がうまくい行かないところまでで終わっていました。
ざっくり変更点を書きますと、

* 1号艦
 * 非力な単三1本(アルカリ)の1.5Vモーター電源
 * DRV777モータードライバによる順方向のみ。単方向推進
* 2号艦
 * 強力な単三3本(エネループ)の3.6Vモーター電源
 * BD6211Fモータードライバによる順方向/逆方向制御。逆進可能

というのが大きな違いになります。共通の仕様としては、TWE-lite無線マイコンの電源はCR2032ボタン電池を使用していることぐらいで、ほぼ新規になっています。

もう一方の第3プリント船体は、モックの第1船体、パーツ擦り合わせ確認用の第2船体に続く、今回初めて作成した3Dプリンタ製の船体です。プリンタの最大出力寸法の都合であまり鋭角なシルエットではありませんが、真四角のタッパーよりは流水に対して抵抗の少ない形状と、水中モーターを違和感なく固定できる固定穴や、電池ボックスや回路をぴったり格納できる内部構造をもっています。主機となるタミヤ水中モーターは電池ボックス部を取り除き、モーター端子にケーブルをはんだ付けした上で、船体にホットボンドで固定しました。
2号艦電装は水中モーターとコネクタで電気的につないだ後、この第3船体内部に格納して、ゴムシートを張ったフタで閉じ、輪ゴムでぐるぐる巻きにして固定します。ゴムシートはAmazonで見つけましたが、一部のホームセンターでも取り扱いがあるようです。ゴムシートの密着面にはグリスを塗って、しっかり水密できるようにしました。したつもりでした。

うちで使っている3DプリンタはUp!Plus2で、このプリンタの最大出力寸法が12cm角程度なため、全長15cm近くある船体を吐くためには出力エリアに斜めに配置しなければなりません。これ以上の船体拡張も難しいため、より大きな出力範囲を持つプリンタが欲しくなりますが、オサイフ的には気軽に買えないのが難しいですね。より大型のものが必要になれば、パーツ分割をして個別出力後に接着となるでしょう。実際この後そうなりました。

## 水密検証
## ホットボンドは避ける。モーターの乾燥は必須
# pythonによる制御アプリjitabata_server

WebからGUIによる操作

# 第4号船体
## 改良ポイント

## 公園じゃぶじゃぶ池海域での試験航海
# 試験航海からの反省
# 第4号船体改良
## 直進性とL/B比
# 第5号船体
## モジュラリティの向上
## 浮力調整
# 2号電装改良・推力調整
# nodejsによる制御アプリjitabata_serverjs

ステータス表示

# 2号艦+第5船体
## じゃぶじゃぶ池海域での試験航海
# 試験航海からの反省

# 開発は続く